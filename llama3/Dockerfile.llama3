FROM ollama/ollama

# Start Ollama temporarily to pull the model
RUN ollama serve & \
    sleep 5 && \
    ollama pull llama3:latest && \
    pkill ollama

EXPOSE 11434

ENV OLLAMA_HOST=0.0.0.0:11434
ENV OLLAMA_KEEP_ALIVE=24h
ENV OLLAMA_NUM_PARALLEL=1
ENV OLLAMA_MAX_QUEUE=8

CMD ["serve"]
